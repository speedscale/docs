import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="macos" label="macOS">

For desktop capture you will need to add the Speedscale TLS certificate to your macOS keychain to allow your applications to make TLS requests to Speedscale components. CLI tools should prompt you to allow configuration automatically. The steps below are only necessary if automatic configuration does not work, and for most languages configuring macOS directly is enough and language-specific instructions can be ignored.

If automatic configuration does not work use [this Apple user guide](https://support.apple.com/guide/keychain-access/add-certificates-to-a-keychain-kyca2431/mac) to add the certificate located at `~/.speedscale/certs/tls.crt` to your keychain. Once added double click the **Speedscale** certificate, expand the **Trust** section, and set **When using this certificate:** to **Always Trust**.

</TabItem>
<TabItem value="golang" label="golang">

Go applications honor the `SSL_CERT_FILE` environment variable. Add the Speedscale certificate, located at `~/.speedscale/certs/tls.crt` on the desktop.

</TabItem>
<TabItem value="nodejs" label="NodeJS">

NodeJS applications newer than v7.3.0 honor the `NODE_EXTRA_CA_CERTS` environment variable. Add the Speedscale certificate, located at `~/.speedscale/certs/tls.crt` on the desktop.

</TabItem>
<TabItem value="ruby" label="Ruby">

Ruby applications honor the `SSL_CERT_FILE` environment variable.  Add the Speedscale certificate, located at `~/.speedscale/certs/tls.crt` on the desktop.

</TabItem>
<TabItem value="dotnet" label=".NET">

.NET applications honor the `SSL_CERT_FILE` environment variable. Add the Speedscale certificate, located at `~/.speedscale/certs/tls.crt` on the desktop.

:::info
.NET Core uses OpenSSL on Linux and Mac which respects default settings. The default Microsoft .NET Docker base images are Linux based which means these settings apply, however running Windows based workloads may require additional configuration.
:::

</TabItem>
<TabItem value="java" label="Java">

Java applications utilize a truststore to determine which certificates will be trusted. During Operator
installation a secret called `speedscale-jks` will be created that contains the `speedscale-certs` root CA
along with a standard set of CA certs used by `openjdk`. This secret is automatically mounted when the
`tls-out` setting is configured as shown below. The Java app itself needs to be configured to use this secret
as well which requires configuring your JVM to use the truststore with these settings:

- `-Djavax.net.ssl.trustStore=/etc/ssl/speedscale/jks/cacerts.jks`
- `-Djavax.net.ssl.trustStorePassword=changeit`

These can be automatically applied by adding to your JVM by setting `JAVA_TOOL_OPTIONS`. This can be set
on your workload by adding the `sidecar.speedscale.com/tls-java-tool-options: "true"` annotation. Read more
about this setting here.

When running in-cluster, these flags are also surfaced as an environment variable `SPEEDSCALE_JAVA_OPTS` if you need to merge with your own existing sets of Java flags.

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: spring-boot-app
  annotations:
    sidecar.speedscale.com/inject: "true"
    sidecar.speedscale.com/tls-out: "true"
    sidecar.speedscale.com/tls-java-tool-options: "true"
```

</TabItem>
</Tabs>

